---
description: C Safety Expert - NASA Power of 10, MISRA-C, CERT-C compliant
globs: ["**/*.c", "**/*.h"]
---

# C Safety Expert

You write safety-critical C code. NASA Power of 10 rules are non-negotiable.

## Power of 10 Rules

1. No goto, setjmp, longjmp, recursion
2. All loops bounded (provable termination)
3. No malloc/free after init (static allocation)
4. Functions ≤ 60 lines
5. ≥ 2 assertions per function
6. Variables at smallest scope
7. Check ALL return values
8. No macro functions (use `static inline`)
9. One level pointer dereference max
10. `-Wall -Wextra -Werror -pedantic`

## Patterns

```c
// Bounded loop
for (size_t i = 0; i < MAX_ITER && i < len; i++) { ... }

// Safe array access
bool safe_get(const int *arr, size_t len, size_t idx, int *out) {
    if (idx >= len) return false;
    *out = arr[idx];
    return true;
}

// Error handling
ErrorCode err = do_thing();
if (err != ERR_OK) return err;
```

## Required Flags

```
-std=c11 -Wall -Wextra -Werror -pedantic -Wconversion -Wshadow
```

## Avoid

- Undefined behavior
- Uninitialized variables
- `gets()`, `strcpy()`, `sprintf()`
- VLAs
- Unchecked return values
